<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedule</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js"
        integrity="sha384-1CmrxMRARb6aLqgBO7yyAxTOQE2AKb9GfXnEo760AUcUmFx3ibVJJAzGytlQcNXd" crossorigin="anonymous">
    </script>
    <!-- <link href="https://www.usu.edu/assets/bs4/css/bootstrap.min.css"rel="stylesheet">
    <link href="https://www.usu.edu/assets/bs4/css/main.css" rel="stylesheet"> -->

    <script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-functions.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="scripts/firebaseInitial.js"></script>
    <script  src="/scripts/Schedule.js" type="module"></script>

</head>

<body>
    <top-banner></top-banner>
    <top-nav></top-nav>

    <div class="container">
        <div class="row">
            <div class="col-sm-2">
                <side-nav currentPage="online-schedule"></side-nav>

            </div>
            <div class="col-sm-9">
                <div class="row">
                    <div class="col-12">
                        <h1>Update Schedule</h1>
                        <p>Click on cells to set schedule then hit update schedule button</p>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <button id="updateSchedule" class="btn btn-primary btn-block mt-2 mb-2 onHoverFloat ">Update Schedule</button>
                    </div>
                </div>
                <div class="row d-none" id="unsavedAlert">
                    <div class="col-sm-12">
                        <div class="alert alert-warning" role="alert">
                            You have Unsaved Schedule changes
                          </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-4">
                        <h2>Monday</h2>

                        <table class="table table-bordered table-striped table-sm">
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    <th id="ColHdrBE"><abbr title="Biological Engineering">BE</abbr></th>
                                    <th id="ColHdrCEE"><abbr title="Civil Engineering">CEE</abbr></th>
                                    <th id="ColHdrEE"><abbr title="Electrical Engineering">EE</abbr></th>
                                    <th id="ColHdrCMPE"><abbr title="Computer Engineering">CMPE</abbr></th>
                                    <th id="ColHdrMAE"><abbr title="Mechanical Engineering">MAE</abbr></th>
                                </tr>
                            </thead>
                            <tbody id="monday">
                                
                            </tbody>
                        </table>

                        

                    </div>
                    <div class="col-sm-4">
                        <h2>Tuesday</h2>

                        <table class="table table-bordered table-striped table-sm">
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    <th id="ColHdrBE"><abbr title="Biological Engineering">BE</abbr></th>
                                    <th id="ColHdrCEE"><abbr title="Civil Engineering">CEE</abbr></th>
                                    <th id="ColHdrEE"><abbr title="Electrical Engineering">EE</abbr></th>
                                    <th id="ColHdrCMPE"><abbr title="Computer Engineering">CMPE</abbr></th>
                                    <th id="ColHdrMAE"><abbr title="Mechanical Engineering">MAE</abbr></th>
                                </tr>
                            </thead>
                            <tbody id="tuesday">
                                
                            </tbody>
                        </table>

                        

                    </div>

                    <div class="col-sm-4">
                        <h2>Wednesday</h2>

                        <table class="table table-bordered table-striped table-sm">
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    <th id="ColHdrBE"><abbr title="Biological Engineering">BE</abbr></th>
                                    <th id="ColHdrCEE"><abbr title="Civil Engineering">CEE</abbr></th>
                                    <th id="ColHdrEE"><abbr title="Electrical Engineering">EE</abbr></th>
                                    <th id="ColHdrCMPE"><abbr title="Computer Engineering">CMPE</abbr></th>
                                    <th id="ColHdrMAE"><abbr title="Mechanical Engineering">MAE</abbr></th>
                                </tr>
                            </thead>
                            <tbody id="wednesday">
                                
                            </tbody>
                        </table>

                        

                    </div>

                    <div class="col-sm-4">
                        <h2>Thursday</h2>

                        <table class="table table-bordered table-striped table-sm">
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    <th id="ColHdrBE"><abbr title="Biological Engineering">BE</abbr></th>
                                    <th id="ColHdrCEE"><abbr title="Civil Engineering">CEE</abbr></th>
                                    <th id="ColHdrEE"><abbr title="Electrical Engineering">EE</abbr></th>
                                    <th id="ColHdrCMPE"><abbr title="Computer Engineering">CMPE</abbr></th>
                                    <th id="ColHdrMAE"><abbr title="Mechanical Engineering">MAE</abbr></th>
                                </tr>
                            </thead>
                            <tbody id="thursday">
                                
                            </tbody>
                        </table>

                        

                    </div>

                    <div class="col-sm-4">
                        <h2>Friday</h2>

                        <table class="table table-bordered table-striped table-sm">
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    <th id="ColHdrBE"><abbr title="Biological Engineering">BE</abbr></th>
                                    <th id="ColHdrCEE"><abbr title="Civil Engineering">CEE</abbr></th>
                                    <th id="ColHdrEE"><abbr title="Electrical Engineering">EE</abbr></th>
                                    <th id="ColHdrCMPE"><abbr title="Computer Engineering">CMPE</abbr></th>
                                    <th id="ColHdrMAE"><abbr title="Mechanical Engineering">MAE</abbr></th>
                                </tr>
                            </thead>
                            <tbody id="friday">
                                
                            </tbody>
                        </table>

                        

                    </div>
                </div>
                
            </div>

        </div>
    </div>

    <custom-footer></custom-footer>
    <login-modal></login-modal>
    <create-account-modal></create-account-modal>
    <add-admin></add-admin>
    <script src="scripts/topBannerNavFooterComponents.js"></script>
    <script src="scripts/components.js"></script>


    <script>
//     let changesSaved="unchanged";
//     let mondayHours = '';
//     let tuesdayHours = '';
//     let wednesdayHours = '';
//     let thursdayHours = '';
//     let fridayHours = '';

//     function generateEditTable(data){
//         let tableHtml = ''; 
//         let time =700
//         for(let i=0;i<26;i++){
//             tableHtml = tableHtml + `<tr>`
//             time = i%2==0?time+100:time;
//             for(let j=0;j<6;j++){
//                 let headerTime = (i%2==0?time:time)>1200?((i%2==0?time+70-100:time))-1170:(i%2==0?time:time+30)
//                 if(j==0){
//                     tableHtml = tableHtml + `<td class="" headers="ColHdrBE RowHdr2000Hrs">${data[i][j]}</td>`
//                 }
//                 if(j==1){
//                     tableHtml = tableHtml + `<td id="${i},${j}" class="${data[i][j]=="X"?"bg-info":"text-white"} " headers="ColHdrBE RowHdr${headerTime}Hrs">${data[i][j]}</td>`
//                 }
//                 if(j==2){
//                     tableHtml = tableHtml + `<td id="${i},${j}" class="${data[i][j]=="X"?"bg-success":"text-white"} " headers="ColHdrCEE RowHdr${headerTime}Hrs">${data[i][j]}</td>`
//                 }
//                 if(j==3){
//                     tableHtml = tableHtml + `<td id="${i},${j}" class="${data[i][j]=="X"?"bg-warning":"text-white"} " headers="ColHdrEE RowHdr${headerTime}Hrs">${data[i][j]}</td>`
//                 }
//                 if(j==4){
//                     tableHtml = tableHtml + `<td id="${i},${j}" class="${data[i][j]=="X"?"bg-warning":"text-white"} " headers="ColHdrCMPE RowHdr${headerTime}Hrs">${data[i][j]}</td>`
//                 }
//                 if(j==5){
//                     tableHtml = tableHtml + `<td id="${i},${j}" class="${data[i][j]=="X"?"bg-danger":"text-white"} " headers="ColHdrMAE RowHdr${headerTime}Hrs">${data[i][j]}</td>`
//                 }
//             }
//             tableHtml = tableHtml + `</tr>`
//         }
//         return tableHtml;
//     }
       



// function setUpClickListenersForCells(data,day){
// let weekday = ["mondayTable","tuesdayTable","wednesdayTable","thursdayTable","fridayTable"]
// document.getElementById(weekday[day]).addEventListener("click", function(e) {
// 	// e.target is the clicked element!
//     // If it was a list item

// 	if(e.target && e.target.nodeName == "TD") {
//         // List item found!  Output the ID!
//         changesSaved = "changed";
//         if(changesSaved=="changed"){document.querySelector('#unsavedAlert').classList.remove('d-none')}
//     else{document.querySelector('#unsavedAlert').classList.add('d-none')}
//         let ij = e.target.id.split(",")
//         let i=ij[0]
//         let j = ij[1]
//         if(data[i][j]!=="X"){
//             data[i][j]="X";
//             }
//             else{
//                 data[i][j]="&nbsp;";
//             }
//         document.querySelector(`#${weekday[day]}`).innerHTML = generateEditTable(data);
// 	}
// });
// }

//      let weekday = ["monday","tuesday","wednesday","thursday","friday"]
//      for(let i=0;i<5;i++){
//         db.collection("schedule").doc(weekday[i]).get().then(function(doc) {
//             if(doc.exists){
//                 let data = doc.data();
//                 let hours = data.hours;
//                 let hoursData = JSON.parse(hours);
//                 if(i==0){
//                     mondayHours=hoursData
//                     document.querySelector("#mondayTable").innerHTML = generateEditTable(hoursData,"mondayTable");
//                     setUpClickListenersForCells(mondayHours,0)
//                 }
//                 if(i==1){
//                     tuesdayHours=hoursData
//                     document.querySelector("#tuesdayTable").innerHTML = generateEditTable(hoursData,"tuesdayTable");
//                     setUpClickListenersForCells(tuesdayHours,1)
//                 }
//                 if(i==2){
//                     wednesdayHours=hoursData
//                     document.querySelector("#wednesdayTable").innerHTML = generateEditTable(hoursData,"wednesdayTable");
//                     setUpClickListenersForCells(wednesdayHours,2)
//                 }
//                 if(i==3){
//                     thursdayHours=hoursData
//                     document.querySelector("#thursdayTable").innerHTML = generateEditTable(hoursData,"thursdayTable");
//                     setUpClickListenersForCells(thursdayHours,3)
//                 }
//                 if(i==4){
//                     fridayHours=hoursData
//                     document.querySelector("#fridayTable").innerHTML = generateEditTable(hoursData,"fridayTable");
//                     setUpClickListenersForCells(fridayHours,4)
//                 }
//             }
//             else{
//                 console.log("no document")
//             }          
//             });
//         }

//         document.querySelector("#updateSchedule").addEventListener("click",function(){
//             let weekday = ["monday","tuesday","wednesday","thursday","friday"]
//             updateFirebaseSchedule(mondayHours,weekday[0])
//             updateFirebaseSchedule(tuesdayHours,weekday[1])
//             updateFirebaseSchedule(wednesdayHours,weekday[2])
//             updateFirebaseSchedule(thursdayHours,weekday[3])
//             updateFirebaseSchedule(fridayHours,weekday[4])
//         })

//         function updateFirebaseSchedule(data,day){
//         db.collection("schedule").doc(day).set({
//                     hours: JSON.stringify(data),
//                 })
//                 .then(function(docRef) {
//                     changesSaved = "saved"
//                     if(changesSaved=="changed"){document.querySelector('#unsavedAlert').classList.remove('d-none')}
//     else{document.querySelector('#unsavedAlert').classList.add('d-none')}
//                         //console.log("Document written with ID: ", docRef.id);
//                 })
//                 .catch(function(error) {
//                     //console.error("Error adding document: ", error);
//                 });

//     }


//     window.onbeforeunload = function(){
//         if(changesSaved ==="changed"){
//         return "You have unsaved changes to the schedule, Are you sure you want to leave?"
//         }
//     };
           </script>
               <script src="scripts/auth.js"></script>

</body>

</html>